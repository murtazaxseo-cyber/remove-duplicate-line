<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Advanced Invoice & Quote Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
/* --------- General Styles --------- */
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 20px;
    max-width: 950px;
    margin-left: auto;
    margin-right: auto;
    background: #f7f7f7;
    color: #222;
    transition: background 0.3s, color 0.3s;
    line-height: 1.5;
}
h2 { margin-bottom: 10px; font-size: 1.6rem; }
h3 { margin-top: 20px; margin-bottom: 10px; font-size: 1.2rem; }

input, select, button, textarea {
    padding: 10px;
    margin: 5px 0;
    width: 100%;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 1rem;
    box-sizing: border-box;
}
button { cursor: pointer; }

.container {
    padding: 15px;
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}
.dark .container {
    background: #1a1a1a;
    color: #eee;
    box-shadow: 0 4px 15px rgba(255,255,255,0.05);
}

.row { display: flex; gap: 10px; flex-wrap: wrap; }
.row input { flex: 1; }

.table-wrapper { overflow-x: auto; margin-top: 10px; }
table { width: 100%; border-collapse: collapse; min-width: 600px; }
th, td { border: 1px solid #ccc; padding: 10px; text-align: left; background: #fafafa; }
.dark th, .dark td { border-color: #444; background: #222; }

.add-btn { background: #4caf50; color: white; border: none; width: 180px; border-radius: 6px; margin-top:10px;}
.convert-btn { background: #9c27b0; color: white; border: none; width: 220px; border-radius: 6px; margin-top:10px;}
.download-btn { background: #1e88e5; color: white; border: none; width: 220px; border-radius: 6px; margin-top:10px;}
.dark-btn { background: #333; color: white; border: none; width: 150px; cursor: pointer; border-radius: 6px; margin-bottom: 10px;}

#totalsBox { margin-top: 20px; padding: 15px; background: #f7f7f7; border-radius: 8px; }
.dark #totalsBox { background: #222; border: 1px solid #444; }

img#logoPreview { max-width: 150px; max-height: 100px; margin-top: 10px; }

/* Mobile responsive */
@media(max-width: 600px) {
    h2 { font-size: 1.3rem; }
    h3 { font-size: 1rem; }
    .add-btn, .convert-btn, .download-btn, .dark-btn { width: 100%; margin-top:10px; }
    table { min-width: 400px; }
}
</style>
</head>
<body>
<div class="container">

<button class="dark-btn" onclick="toggleDark()">üåô Dark Mode</button>

<h2 id="title">Invoice & Quote Generator</h2>

<div class="row">
    <div>
        <label id="tradeLabel">Choose Trade:</label>
        <select id="niche" onchange="applyPreset()">
            <option value="electrician">Electrician</option>
            <option value="plumber">Plumber</option>
            <option value="roofer">Roofer</option>
            <option value="carpenter">Carpenter</option>
            <option value="hvac">HVAC Technician</option>
            <option value="handyman">Handyman</option>
            <option value="freelancer">Freelancer</option>
            <option value="painter">Painter</option>
            <option value="landscaper">Landscaper / Gardener</option>
            <option value="cleaning">Cleaning Service</option>
            <option value="mason">Mason / Bricklayer</option>
            <option value="pest">Pest Control</option>
            <option value="pool">Pool Maintenance</option>
            <option value="inspector">Home Inspector</option>
            <option value="appliance">Appliance Repair</option>
            <option value="designer">Interior Designer</option>
            <option value="photographer">Photographer / Videographer</option>
            <option value="it">Computer / IT Support</option>
            <option value="trainer">Personal Trainer</option>
            <option value="event">Event Planner</option>
            <option value="courier">Courier / Delivery</option>
            <option value="tailor">Tailor / Clothing Alterations</option>
            <option value="pet">Dog Walker / Pet Sitter</option>
            <option value="custom">Custom</option>
        </select>
    </div>
    <div>
        <label id="langLabel">Language:</label>
        <select id="language" onchange="translateUI()">
            <option value="en">English</option>
            <option value="es">Espa√±ol</option>
            <option value="fr">Fran√ßais</option>
            <option value="de">Deutsch</option>
            <option value="pt">Portugu√™s</option>
            <option value="it">Italiano</option>
            <option value="nl">Nederlands</option>
            <option value="pl">Polski</option>
            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
            <option value="tr">T√ºrk√ße</option>
            <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
            <option value="fa">ŸÅÿßÿ±ÿ≥€å</option>
            <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
            <option value="ur">ÿßÿ±ÿØŸà</option>
            <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
            <option value="zh-CN">‰∏≠Êñá (ÁÆÄ‰Ωì)</option>
            <option value="zh-TW">‰∏≠Êñá (ÁπÅÈ´î)</option>
            <option value="ja">Êó•Êú¨Ë™û</option>
            <option value="ko">ÌïúÍµ≠Ïñ¥</option>
            <option value="id">Bahasa Indonesia</option>
            <option value="vi">Ti·∫øng Vi·ªát</option>
            <option value="th">‡πÑ‡∏ó‡∏¢</option>
            <option value="sw">Swahili</option>
        </select>
    </div>
</div>

<h3 id="bizInfoTitle">Your Business Information</h3>
<input id="bizName" placeholder="Business Name">
<input id="bizPhone" placeholder="Phone Number">
<input id="bizEmail" placeholder="Email">
<input id="bizAddress" placeholder="Address">
<label>Upload Logo:</label>
<input type="file" id="logo" onchange="previewLogo(event)">
<img id="logoPreview" src="">

<h3 id="clientInfoTitle">Client Information</h3>
<input id="clientName" placeholder="Client Name">
<input id="clientAddress" placeholder="Client Address">

<div class="row">
<div>
<h3 id="dateLabel">Invoice Date:</h3>
<input type="date" id="invoiceDate" value="">
</div>
<div>
<h3 id="dueDateLabel">Due Date:</h3>
<input type="date" id="dueDate" value="">
</div>
</div>

<h3 id="itemsTitle">Line Items</h3>
<div class="table-wrapper">
<table id="itemsTable">
    <thead>
        <tr>
            <th id="descHeader">Description</th>
            <th id="qtyHeader">Qty</th>
            <th id="rateHeader">Rate</th>
            <th id="totalHeader">Total</th>
            <th>‚ùå</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>
</div>
<button class="add-btn" onclick="addItem()">+ Add Item</button>

<h3 id="taxLabel">Tax (%)</h3>
<input type="number" id="tax" value="0" oninput="calcTotals()">

<div id="totalsBox">
    <p id="subtotalLabel">Subtotal: $0.00</p>
    <p id="taxAmountLabel">Tax Amount: $0.00</p>
    <p id="grandTotalLabel"><b>Total: $0.00</b></p>
</div>

<div class="row">
<div>
<label>Currency:</label>
<select id="currency" onchange="calcTotals()">
    <option value="$">$ USD</option>
    <option value="‚Ç¨">‚Ç¨ EUR</option>
    <option value="¬£">¬£ GBP</option>
    <option value="‚Çπ">‚Çπ INR</option>
    <option value="AED">AED</option>
</select>
</div>
<div>
<button class="convert-btn" onclick="convertToInvoice()">Convert Quote ‚Üí Invoice</button>
</div>
</div>

<h3 id="notesLabel">Notes</h3>
<textarea id="notes" rows="5"></textarea>

<button class="download-btn" onclick="downloadPDF()">Download PDF</button>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
// ---------- Variables ----------
let invoiceNumber = localStorage.getItem("invoiceNumber") || 1;
const niches = {
    electrician:["Wiring installation","Outlet repair","Panel service"],
    plumber:["Leak repair","Pipe install","Drain cleaning"],
    roofer:["Shingle replacement","Leak patching","Inspection"],
    carpenter:["Woodwork","Door installation","Cabinet repair"],
    hvac:["AC repair","Furnace tune-up","Duct cleaning"],
    handyman:["General repair","Painting","Assembly"],
    freelancer:["Design work","Consultation","Editing"],
    painter:["Interior painting","Exterior painting","Touch-ups"],
    landscaper:["Lawn mowing","Hedge trimming","Garden design"],
    cleaning:["House cleaning","Carpet cleaning","Window cleaning"],
    mason:["Bricklaying","Stonework","Repair"],
    pest:["Pest inspection","Extermination","Preventive treatment"],
    pool:["Pool cleaning","Chemical balancing","Repairs"],
    inspector:["Home inspection","Report preparation","Consultation"],
    appliance:["Fridge repair","Oven repair","Washing machine service"],
    designer:["Room design","Furniture planning","3D rendering"],
    photographer:["Event shoot","Editing","Photo album creation"],
    it:["PC repair","Network setup","Software install"],
    trainer:["Personal training","Workout plan","Nutrition advice"],
    event:["Event planning","Decor setup","Coordination"],
    courier:["Package delivery","Same-day delivery","Tracking"],
    tailor:["Alterations","Custom tailoring","Repairs"],
    pet:["Dog walking","Pet sitting","Grooming"],
    custom:[""]
};

const translations = { /* Multi-language labels here (simplified for demo) */
    en:{title:"Invoice & Quote Generator",tradeLabel:"Choose Trade:",langLabel:"Language:",
        bizInfoTitle:"Your Business Information",clientInfoTitle:"Client Information",itemsTitle:"Line Items",
        descHeader:"Description",qtyHeader:"Qty",rateHeader:"Rate",totalHeader:"Total",
        addItemBtn:"+ Add Item",taxLabel:"Tax (%)",subtotalLabel:"Subtotal: ",taxAmountLabel:"Tax Amount: ",
        grandTotalLabel:"Total: ",convertBtn:"Convert Quote ‚Üí Invoice",notesLabel:"Notes",downloadBtn:"Download PDF",
        dateLabel:"Invoice Date:",dueDateLabel:"Due Date:"}
};

// ---------- Functions ----------
function translateUI(){const t=translations[language.value]||translations["en"];for(let k in t){if(document.getElementById(k)){document.getElementById(k).textContent=t[k]}}}

function toggleDark(){document.body.classList.toggle("dark");}

function applyPreset(){
    const niche = niche.value;
    const tbody = document.querySelector("#itemsTable tbody");
    tbody.innerHTML="";
    niches[niche].forEach(d=>addItem(d));
}

function addItem(desc=""){
    const tbody = document.querySelector("#itemsTable tbody");
    const row = document.createElement("tr");
    row.innerHTML=`
        <td><input value="${desc}" oninput="calcTotals()"></td>
        <td><input type="number" value="1" oninput="calcTotals()"></td>
        <td><input type="number" value="0" oninput="calcTotals()"></td>
        <td class="total">$0</td>
        <td><button onclick="removeItem(this)">‚ùå</button></td>
    `;
    tbody.appendChild(row);
    calcTotals();
}

function removeItem(btn){btn.closest("tr").remove();calcTotals();}

function calcTotals(){
    let subtotal=0;const curr=currency.value;
    document.querySelectorAll("#itemsTable tbody tr").forEach(row=>{
        const qty=parseFloat(row.children[1].querySelector("input").value)||0;
        const rate=parseFloat(row.children[2].querySelector("input").value)||0;
        const total=qty*rate;
        row.children[3].innerText=curr+total.toFixed(2);
        subtotal+=total;
    });
    const taxRate=parseFloat(document.getElementById("tax").value)||0;
    const taxAmount=subtotal*(taxRate/100);
    const grand=subtotal+taxAmount;
    subtotalLabel.innerText=translations[language.value].subtotalLabel+curr+subtotal.toFixed(2);
    taxAmountLabel.innerText=translations[language.value].taxAmountLabel+curr+taxAmount.toFixed(2);
    grandTotalLabel.innerHTML=`<b>${translations[language.value].grandTotalLabel}${curr}${grand.toFixed(2)}</b>`;
}

function convertToInvoice(){title.innerText="Invoice";invoiceNumber++;localStorage.setItem("invoiceNumber",invoiceNumber);}

function previewLogo(event){const reader=new FileReader();reader.onload=function(){logoPreview.src=reader.result};reader.readAsDataURL(event.target.files[0]);}

function downloadPDF(){
    const { jsPDF } = window.jspdf; const pdf=new jsPDF();
    let y=10;
    if(logoPreview.src){pdf.addImage(logoPreview.src,'PNG',150,10,50,30)}
    pdf.setFontSize(16);pdf.text(title.innerText,10,y);y+=10;
    pdf.setFontSize(11);
    pdf.text(`Invoice #: ${invoiceNumber}`,10,y);y+=6;
    pdf.text(`Business: ${bizName.value}`,10,y);y+=6;
    pdf.text(`Phone: ${bizPhone.value}`,10,y);y+=6;
    pdf.text(`Email: ${bizEmail.value}`,10,y);y+=6;
    pdf.text(`Address: ${bizAddress.value}`,10,y);y+=10;
    pdf.text(`Client: ${clientName.value}`,10,y);y+=6;
    pdf.text(`Client Address: ${clientAddress.value}`,10,y);y+=6;
    pdf.text(`Invoice Date: ${invoiceDate.value}`,10,y);y+=6;
    pdf.text(`Due Date: ${dueDate.value}`,10,y);y+=10;
    pdf.text("Items:",10,y);y+=6;
    document.querySelectorAll("#itemsTable tbody tr").forEach(r=>{
        const d=r.children[0].querySelector("input").value;
        const q=r.children[1].querySelector("input").value;
        const rt=r.children[2].querySelector("input").value;
        const t=r.children[3].innerText;
        pdf.text(`${d} | ${q} | ${rt} | ${t}`,10,y);y+=6;
    });
    y+=6;
    pdf.text(subtotalLabel.innerText,10,y);y+=6;
    pdf.text(taxAmountLabel.innerText,10,y);y+=6;
    pdf.text(grandTotalLabel.innerText,10,y);y+=10;
    pdf.text("Notes:",10,y);y+=6;
    pdf.text(notes.value,10,y);
    pdf.save(`Invoice-${invoiceNumber}.pdf`);
}

// ---------- Initialize ----------
applyPreset();
translateUI();
calcTotals();
</script>
</body>
</html>